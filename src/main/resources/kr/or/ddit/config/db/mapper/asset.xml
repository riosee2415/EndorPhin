<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="asset">

	<!-- 자산 조회하기 -->
	<select id="getAllAsset" resultType="assetVo">
        SELECT
	        ASSETCODE, 
	        ASSETNAME, 
	        acquisitionDate, 
	        ACCOUNTNAME, 
	        CLIENTNAME, 
	        SANGGAKWAY, 
	        ACQUISITIONPRICE, 
	        SLIPNUMBER, 
	        RESIDUALVALUE, 
	        JUKYO, 
	        QUANTITY, 
	        COMPANYCODE,
	        sanggakCode,
	        depreciation,
	        purchaseCode,
	        accumulated,
	        serviceLife,
	        depreciationRate
	    FROM ASSET
	</select>
	
	<!--상세화면 조회하기   -->
	<select id="selectAsset" resultType="assetVo" parameterType="map">
        SELECT
	        ASSETCODE, 
	        ASSETNAME, 
	        acquisitionDate, 
	        ACCOUNTNAME, 
	        CLIENTNAME, 
	        SANGGAKWAY, 
	        ACQUISITIONPRICE, 
	        SLIPNUMBER, 
	        RESIDUALVALUE, 
	        JUKYO, 
	        QUANTITY, 
	        COMPANYCODE,
	        sanggakCode,
	        depreciation,
	        purchaseCode,
	        accumulated,
	        serviceLife,
	        depreciationRate
	    FROM ASSET
	    WHERE ASSETCODE = #{assetCode}
	    
	</select>
	
	
	<!-- 자산 추가하기 -->
	<insert id="insertAsset" parameterType="assetVo">
		INSERT overwrite  INTO ASSET
        (ASSETCODE, ASSETNAME, ACQUISITIONDATE, ACCOUNTNAME, CLIENTNAME, SANGGAKWAY, acquisitionPrice, 
          RESIDUALVALUE, JUKYO,sanggakCode,depreciation,purchaseCode,accumulated,serviceLife,depreciationRate)
   		 VALUES
        (#{assetCode},nvl(#{assetName, jdbcType=VARCHAR},null),#{acquisitionDate},#{accountName},
         nvl(#{clientName, jdbcType=VARCHAR},null),#{sanggakWay},#{acquisitionPrice}
        ,nvl(#{residualvalue, jdbcType=VARCHAR},null),nvl(#{jukyo, jdbcType=VARCHAR},null)
        ,nvl(#{sanggakCode, jdbcType=VARCHAR},null),nvl(#{depreciation, jdbcType=VARCHAR},null)
        ,nvl(#{purchaseCode, jdbcType=VARCHAR},null),nvl(#{accumulated, jdbcType=VARCHAR},null),#{serviceLife},#{depreciationRate})
	</insert> 
	
	<insert id="insertStatusAsset" parameterType="assetVo">              
     insert into asset
        (assetCode, acquisitionDate,sanggakWay, purchaseCode,acquisitionPrice) values
        (#{assetCode},#{acquisitionDate},#{sanggakWay},#{purchaseCode},#{acquisitionPrice}) 
	</insert>
	
	<update id="updateStatusAsset" parameterType="assetVo">
		 update asset set 
					acquisitionDate = #{acquisitionDate},
					sanggakWay  = #{sanggakWay},
					acquisitionPrice = #{acquisitionPrice},
					purchaseCode = #{purchaseCode}
		     where  assetCode = #{assetCode}
	</update>
	
	<update id="updateAsset" parameterType="assetVo">
		 update asset set 
					assetName  = #{assetName},
					acquisitionDate = #{acquisitionDate},
					sanggakWay  = #{sanggakWay},
					accountName = #{accountName},
					clientName = #{clientName},
					acquisitionPrice = #{acquisitionPrice},
					residualvalue = #{residualvalue},
					jukyo = #{jukyo},
					sanggakCode = #{sanggakCode},
					depreciation = #{depreciation},
					accumulated = nvl(#{accumulated, jdbcType=VARCHAR},null),
					purchaseCode = #{purchaseCode},
					serviceLife = #{serviceLife},
					depreciationRate = #{depreciationRate}
		     where  assetCode = #{assetCode}
	</update>
	
	<!--  삭제 -->
	<delete id="deleteAsset" parameterType="map">
		delete from asset
		where assetCode = nvl(#{assetCode, jdbcType=VARCHAR},null)
	</delete>
	
		<!--코드로 검색  -->
	<select id="searchAsset" resultType="assetVo" parameterType="map">
		select
		 ASSETCODE, 
	        ASSETNAME, 
	        acquisitionDate, 
	        ACCOUNTNAME, 
	        CLIENTNAME, 
	        SANGGAKWAY, 
	        ACQUISITIONPRICE, 
	        SLIPNUMBER, 
	        RESIDUALVALUE, 
	        JUKYO, 
	        QUANTITY, 
	        COMPANYCODE,
	        sanggakCode,
	        depreciation,
	        purchaseCode,
	        accumulated,
	        serviceLife,
	        depreciationRate
		from asset
		where assetCode like '%' || #{assetCode} || '%'
	</select>
</mapper>


