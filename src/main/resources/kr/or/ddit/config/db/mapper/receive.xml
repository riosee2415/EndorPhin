<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="receive">

	<!-- 창고 입출고 이력 입력 -->
	<insert id="insertReceive" parameterType="receiveVo">
		<selectKey keyProperty="receivecode" order="BEFORE" resultType="String">
			select receive_seq.nextval()
			from	dual
		</selectKey>
		insert into receive
		(receivecode, receivedate, sortation, quantity, material,
		 warehousecode, ordercode, productcode)
		values
		(#{receiveCode},sysdate,#{sortation}
		,nvl(#{quantity, jdbcType=VARCHAR},null)
		,nvl(#{material, jdbcType=VARCHAR},null)
		,#{warehouseCode}
		,nvl(#{orderCode, jdbcType=VARCHAR},null)
		,#{productCode})
	</insert>


	<!-- 창고 입출고 이력  전체 불러오기 -->
	<select id="getAllReceive" resultType="receiveVo">
		select
		receivecode, receivedate, sortation, quantity, material,
		 warehousecode, ordercode, productcode
		from receive
	</select>


	<!-- 창고 입출고 이력 선택하여 가져오기 -->
	<select id="selectReceive" resultType="receiveVo"
		parameterType="String">
		select
		receivecode, receivedate, sortation, quantity, material,
		 warehousecode, ordercode, productcode
		from	receive 
		where   ordercode = #{orderCode}
	</select>


	<!-- 창고 입출고 이력  삭제 -->
	<delete id="deleteReceive" parameterType="String">
		delete from receive
		where receivecode = #{receiveCode}
	</delete>
	
	<update id="updateReceive" parameterType="receiveVo">
		update receive
		set receivedate = nvl(#{receiveDate, jdbcType=VARCHAR},receivedate)
			,sortation = nvl(#{sortation, jdbcType=VARCHAR},sortation)
			,quantity = nvl(#{quantity, jdbcType=VARCHAR},quantity)
			,material = nvl(#{material, jdbcType=VARCHAR},material)
			,warehousecode = nvl(#{warehouseCode, jdbcType=VARCHAR},warehousecode)
			,ordercode = nvl(#{orderCode, jdbcType=VARCHAR},ordercode)
			,productcode = nvl(#{productCode, jdbcType=VARCHAR},productcode)
		where	receivecode = #{receiveCode}
	</update>
</mapper>



